## strategy 패턴

strategy 패턴은 **같은 기능이지만 서로 다른 전략**을 가진 클래스들을 각각 캡슐화하여 상호교환할 수 있도록 하는 패턴이다.


##### 즉, 어떤 일을 수행하는 알고리즘이 여러가지 일때, 동작들을 미리 전략으로 정의함으로써 손쉽게 전략을 교체할 수 있는 **알고리즘 변형이 빈번하게 필요한 경우**에 적합한 패턴이다.


#### strategy 패턴을 사용하면 좋은 시기는 다음과 같다.
- 전략 알고리즘의 여러 버전 또는 변형이 필요할 때 클래스화를 통해 관리
- 알고리즘 코드가 노출되어서는 안 되는 데이터에 액세스 하거나 데이터를 활용할 때
- 알고리즘의 동작이 런타임에 실시간으로 교체 되어야 할때


#### 전략 패턴은 아래와 같은 주의점이 있다.
1. 알고리즘이 많아질수록 관리해야할 객체의 수가 늘어난다는 단점이 있다.
2. 만일 어플리케이션 특성이 알고리즘이 많지 않고 자주 변경되지 않는다면, 새로운 클래스와 인터페이스를 만들어 프로그램을 복잡하게 만들 이유가 없다.
3. 개발자는 적절한 전략을 선택하기 위해 전략 간의 차이점을 파악하고 있어야 한다.


---


### 예제를 통해 살펴보자.

학생이 계산기를 사용한다고 가정해보자.

크게 덧셈과 뺄셈을 진행하는 계산기라고 할 때, 필요한 때에 연산을 바꿔서 진행할 수 있다.


#### 먼저 TemplateMethod 패턴을 적용하지 않았을 때 : [전체 코드](https://github.com/JZU0/Java-design-patterns/tree/main/Lee-Juhyun/beforeTemplateMethod) 
##### 만드는 법을 비교해보자.
|된장찌개|김치찌개|
|:---:|:---:|
|육수를 우린다|육수를 우린다|
|양파를 넣는다|양파를 넣는다|
|파를 넣는다|파를 넣는다|
|된장을 푼다|김치를 넣는다|

#### 간단하게 봤을 때도 중복되는 단계가 많다는 것을 알 수 있다.

##### 하나의 공통된 것을 두고, 상속을 통해 자식 클래스에서 다른 부분을 추가하면 코드 중복을 최소화 할 수 있을 것이라 판단된다.

*이때 TemplateMethod 패턴을 사용한다.*

#### TemplateMethod 패턴을 적용했을 때 : [전체 코드](https://github.com/JZU0/Java-design-patterns/tree/main/Lee-Juhyun/afterTemplateMethod) 
##### 만드는 법을 비교해보자.
|                   공통된 단계                    |
|:-------------------------------------------:|
| 1.육수를 우린다<br/>2. 양파를 넣는다<br/>3.파를 넣는다.<br/> | 

|                    된장찌개                     |김치찌개|
|                    :---:                    |:---:|
|                   된장을 푼다                    |김치를 넣는다|


##### 공통된 단계를 하나로 묶고, 다른 부분을 구체화하여 중복을 최소한 것을 볼 수 있다.


---

### 코드의 전체적인 구조를 알기 위해 UML 클래스 다이어그램을 살펴보자.

|<b>TemplateMethod UML</b> |
| :--: |
| ![TemplateMethodUML](https://github.com/JZU0/Java-design-patterns/assets/97423172/869457ca-b6a6-4501-8956-9b111b36115b)|

#### Stew 클래스 안에는 makeStew 메소드가 정의되어 있고 makeStew 메소드 안에서 makeBroth, addOnions, addGreenOnions라는 세 개의 메소드와 addExtraIngredients 메소드가 사용된다.
#### 앞의 세개의 메소드는 공통된 부분을 정의한 부분이므로 private 메소드로 변경하지 않도록 구현했다. 
#### addExtraIngredients 메소드는 추상 메소드이고, 이 메소드를 실제로 구현하는 것은 Stew의 하위 클래스인 SoybeanPasteStew와 KimchiStew이다. 
#### 상위 추상클래스로 로직을 공통화 하여 코드의 중복을 줄인 것을 확인할 수 있다.







 
